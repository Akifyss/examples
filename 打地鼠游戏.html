<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/iconify-icon/2.0.0/iconify-icon.min.js"></script>
    <style>
        :root {
            --uiWidth: 700px;
            --uiHeight: 500px;
        }

        .game-container {
            width: var(--uiWidth);
            height: var(--uiHeight);
        }

        .hole {
            width: 100px;
            height: 100px;
            border-radius: 50%;
        }

        .hammer-cursor {

            cursor: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' fill='none' viewBox='0 0 80 80'%3e%3cpath fill='%23A06841' d='M68.685 66.015 65.35 68.9a3.068 3.068 0 0 1-4.335-.325L21.48 20.855l5.085-3.825L68.94 61.72a3 3 0 0 1-.255 4.295Z'/%3e%3cpath fill='%237D5133' d='m25.095 25.215 9.41 11.36c1.465-2.21 2.215-4.86 2.815-8.205l-9.085-9.58a8.274 8.274 0 0 0-1.855 2.145c-.775 1.295-1.18 2.77-1.285 4.28Z'/%3e%3cpath fill='%2382AEC0' d='M43.745 10.365c-8.635-.1-11.83.665-16.64 4.82-1.44 1.245-2.885 2.49-4.325 3.735-1.57 1.355-3.655 2.535-3.325 4.88.12.855.385 1.72.225 2.57-.155.8-1.085 1.2-1.75.745-.62-.43-1.31-.955-2.075-1.045a2.633 2.633 0 0 0-2.015.625l-3.345 2.975s-.48 1.945 3.265 6.185c3.745 4.24 6.155 3.935 6.155 3.935l3.145-2.765c.53-.465.8-1.145.79-1.85-.015-.82-.495-1.455-.78-2.195-.055-.14-.37-.64.18-1.09.49-.425 1.495-.28 2.065-.125.575.155 1.12.4 1.7.55 1.125.295 1.65-.23 2.435-.905.69-.6 4.86-4.2 6.25-5.4 2.775-2.4-1.455-6.6-1.455-6.6-2-2.25 10.085-7.92 10.085-7.92.88-.315.61-1.11-.585-1.125Z'/%3e%3cpath fill='%232F7889' d='M27.01 32.315c.235.06.44.08.63.075v-.095c-.05-.54-.345-1.025-.64-1.475a32.243 32.243 0 0 0-6.845-7.5c-.22-.175-.45-.35-.685-.5-.05.305-.06.63-.01.985.12.855.385 1.72.225 2.57-.17.875-1.085 1.12-1.79.79 1.825 1.18 3.395 2.755 4.53 4.605.155.25.31.515.49.75a.887.887 0 0 1 .34-.63c.49-.425 1.495-.28 2.065-.125.565.155 1.115.4 1.69.55ZM16.715 33.37c2.62 2.74 4.095 5.585 3.295 6.355-.805.77-3.58-.83-6.205-3.57-2.625-2.74-4.115-5.71-3.315-6.48.8-.77 3.605.955 6.225 3.695Z'/%3e%3cpath fill='%23B9E4EA' d='M26.925 19.2c2.085-.89 3.945-2.79 6.37-4.885.695-.6 1.575-1.165 2.475-1.59.335-.16.215-.67-.16-.66-1.25.02-2.365.4-3.46.875-1.535.665-2.885 1.68-4.195 2.72-.895.715-3 2.49-4.325 3.61-.245.21-.055.535.27.54.94.005 1.465.055 3.025-.61Zm-13.14 8.705c-.88.99.24 1.26 2.22 2.895 1.395 1.155 2.875.085 2.89-.995.01-.97-.23-1.49-1.645-2.38-1.41-.89-2.665-.42-3.465.48Z'/%3e%3c/svg%3e"), auto !important;

        }



        .click-cursor.hammer-cursor {

            cursor: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='86' height='86' fill='none' viewBox='0 0 86 86'%3e%3cg clip-path='url(%23a)'%3e%3cpath fill='%23A06841' d='m79.992 54.455-1.803 4.024a3.068 3.068 0 0 1-4.066 1.538l-56-26.542 2.992-5.616 57.292 22.595a3 3 0 0 1 1.584 4Z'/%3e%3cpath fill='%237D5133' d='m23.243 35.9 13.33 6.318c.393-2.622-.047-5.34-.917-8.626L23.374 28.75a8.274 8.274 0 0 0-.775 2.728c-.155 1.501.101 3.01.644 4.422Z'/%3e%3cpath fill='%2382AEC0' d='M33.87 14.559c-7.868 3.559-10.44 5.602-13.044 11.4-.779 1.738-1.562 3.477-2.341 5.213-.85 1.892-2.241 3.843-.951 5.829.47.724 1.076 1.396 1.29 2.234.197.79-.477 1.546-1.272 1.414-.743-.127-1.59-.312-2.322-.07a2.633 2.633 0 0 0-1.562 1.418l-1.774 4.11s.387 1.966 5.573 4.226 7.241.965 7.241.965l1.682-3.835c.284-.645.241-1.376-.066-2.01-.36-.738-1.063-1.11-1.634-1.66-.11-.104-.606-.424-.298-1.064.265-.593 1.237-.886 1.819-.986.586-.103 1.184-.111 1.773-.22 1.144-.208 1.398-.906 1.824-1.85.372-.835 2.63-5.86 3.383-7.535 1.5-3.348-4.108-5.367-4.108-5.367-2.764-1.194 5.793-11.44 5.793-11.44.664-.657.083-1.263-1.006-.772Z'/%3e%3cpath fill='%232F7889' d='M27.98 41.525c.238-.045.432-.114.602-.198l-.04-.087c-.274-.468-.746-.783-1.204-1.066a32.243 32.243 0 0 0-9.373-3.904 8.23 8.23 0 0 0-.832-.164c.084.298.212.596.407.897.47.724 1.076 1.396 1.29 2.234.216.865-.51 1.474-1.288 1.472 2.153.299 4.241 1.063 6.052 2.26.246.16.498.335.76.472a.887.887 0 0 1 .043-.714c.264-.593 1.236-.886 1.818-.986.578-.099 1.18-.11 1.764-.216Zm-8.885 5.307c3.532 1.376 6.072 3.331 5.672 4.367-.404 1.038-3.595.76-7.133-.613-3.537-1.374-6.142-3.436-5.742-4.472.4-1.036 3.67-.658 7.203.718Z'/%3e%3cpath fill='%23B9E4EA' d='M22.36 29.675c1.513-1.688 2.396-4.196 3.708-7.12a11.22 11.22 0 0 1 1.572-2.487c.236-.286-.089-.698-.424-.53-1.125.546-1.975 1.362-2.766 2.255-1.11 1.251-1.905 2.742-2.653 4.238-.509 1.026-1.666 3.524-2.394 5.1-.133.293.176.508.473.375.854-.393 1.35-.57 2.484-1.831Zm-8.23 13.442c-.38 1.27.75 1.04 3.235 1.686 1.753.457 2.642-1.138 2.199-2.123-.4-.884-.838-1.254-2.497-1.462-1.654-.21-2.593.745-2.937 1.9Z'/%3e%3c/g%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath fill='white' d='M0 0h64v64H0z' transform='rotate(-25 62.31 12.69)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"), auto !important;

        }

        .hit-feedback {
            background-color: red;
        }

        .hit-popup {
            position: absolute;
            top: -20px;
            font-size: 24px;
            animation: popup 0.5s;
        }

        @keyframes popup {
            0% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }
    </style>
</head>

<body class="hammer-cursor">
    <div class="game-container bg-white mx-auto mt-8 p-4 rounded shadow-lg flex flex-col items-center">
        <div id="score-board" class="w-full flex justify-between items-center mb-4 text-lg">
            <span>时间: <span id="time" class="font-bold">30</span> 秒</span>
            <span>得分: <span id="score" class="font-bold">0</span></span>
        </div>
        <div class="grid grid-cols-3 gap-4 w-full h-full">
            <div id="hole-1" class="hole bg-gray-400 flex justify-center items-center relative">
                <iconify-icon icon="emojione:mouse" class="text-6xl hidden" id="mole-1"></iconify-icon>
            </div>
            <div id="hole-2" class="hole bg-gray-400 flex justify-center items-center relative">
                <iconify-icon icon="emojione:mouse" class="text-6xl hidden" id="mole-2"></iconify-icon>
            </div>
            <div id="hole-3" class="hole bg-gray-400 flex justify-center items-center relative">
                <iconify-icon icon="emojione:mouse" class="text-6xl hidden" id="mole-3"></iconify-icon>
            </div>
            <div id="hole-4" class="hole bg-gray-400 flex justify-center items-center relative">
                <iconify-icon icon="emojione:mouse" class="text-6xl hidden" id="mole-4"></iconify-icon>
            </div>
            <div id="hole-5" class="hole bg-gray-400 flex justify-center items-center relative">
                <iconify-icon icon="emojione:mouse" class="text-6xl hidden" id="mole-5"></iconify-icon>
            </div>
            <div id="hole-6" class="hole bg-gray-400 flex justify-center items-center relative">
                <iconify-icon icon="emojione:mouse" class="text-6xl hidden" id="mole-6"></iconify-icon>
            </div>
            <div id="hole-7" class="hole bg-gray-400 flex justify-center items-center relative">
                <iconify-icon icon="emojione:mouse" class="text-6xl hidden" id="mole-7"></iconify-icon>
            </div>
            <div id="hole-8" class="hole bg-gray-400 flex justify-center items-center relative">
                <iconify-icon icon="emojione:mouse" class="text-6xl hidden" id="mole-8"></iconify-icon>
            </div>
            <div id="hole-9" class="hole bg-gray-400 flex justify-center items-center relative">
                <iconify-icon icon="emojione:mouse" class="text-6xl hidden" id="mole-9"></iconify-icon>
            </div>
        </div>
    </div>

    <script type="module">
        document.body.addEventListener('mousedown', function () {
            document.body.classList.add('click-cursor');
        });

        document.body.addEventListener('mouseup', function () {
            document.body.classList.remove('click-cursor');
        });

        const timeDisplay = document.getElementById('time');
        const scoreDisplay = document.getElementById('score');
        const holes = document.querySelectorAll('[id^="hole-"]');
        const moles = document.querySelectorAll('[id^="mole-"]');

        let currentTimeout;
        let currentHoleIndex = null;
        let score = 0;
        let time = 30;
        let moleInterval = 1000;

        function startGame() {
            time = 30;
            score = 0;
            moleInterval = 1000;
            scoreDisplay.textContent = score;
            timeDisplay.textContent = time;

            const gameInterval = setInterval(() => {
                time--;
                timeDisplay.textContent = time;

                if (time <= 0) {
                    clearInterval(gameInterval);
                    clearTimeout(currentTimeout);
                    if (currentHoleIndex !== null) {
                        moles[currentHoleIndex].classList.add('hidden');
                    }
                    alert(`游戏结束! 你的最终得分是: ${score}`);
                }

                if (time % 5 === 0) {
                    moleInterval *= 0.9;
                }
            }, 1000);

            showMole();
        }

        function showMole() {
            if (currentHoleIndex !== null) {
                moles[currentHoleIndex].classList.add('hidden');
            }

            const randomHoleIndex = Math.floor(Math.random() * holes.length);
            moles[randomHoleIndex].classList.remove('hidden');
            currentHoleIndex = randomHoleIndex;

            currentTimeout = setTimeout(showMole, moleInterval);
        }

        holes.forEach((hole, holeIndex) => {
            hole.addEventListener('click', () => {
                handleHit(holeIndex);
            });
        });

        moles.forEach((mole, moleIndex) => {
            mole.addEventListener('click', () => {
                handleHit(moleIndex);
            });
        });

        function handleHit(index) {
            if (index === currentHoleIndex) {
                score++;
                scoreDisplay.textContent = score;
                moles[index].classList.add('hidden');
                clearTimeout(currentTimeout);
                showMole();

                // 添加视觉反馈
                const hole = document.getElementById(`hole-${index + 1}`);
                hole.classList.add('hit-feedback');
                const hitPopup = document.createElement('div');
                hitPopup.className = 'hit-popup';
                hitPopup.style.fontSize = '48px';
                hitPopup.textContent = '💥';
                hole.appendChild(hitPopup);

                setTimeout(() => {
                    hole.classList.remove('hit-feedback');
                    hitPopup.remove();
                }, 500);
            }
        }

        startGame();
    </script>
</body>

</html>